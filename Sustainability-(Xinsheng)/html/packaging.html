<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order Packaging | EcoHawker</title>
    <link rel="stylesheet" href="../css/style.css">
    <style>
        .packaging-card {
            background: white;
            border: 20px solid #2d6a4f;
            border-radius: 15px;
            padding: 30px;
            max-width: 700px;
            margin: 20px auto;
            text-align: left;
        }
        .item-header { font-size: 1.4rem; font-weight: bold; margin-bottom: 15px; }
        
        .option-list { border: 1px solid #ddd; border-radius: 5px; overflow: hidden; }
        .option-item {
            padding: 12px;
            border-bottom: 1px solid #ddd;
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
        }
        .option-item:last-child { border-bottom: none; }
        .option-item:hover { background: #f9f9f9; }
        
        .remarks-box { width: 100%; height: 40px; border: 1px solid #ddd; margin: 20px 0; border-radius: 4px; }
        
        /* QR Section only appears for BYO */
        #qr-section {
            display: none;
            border-top: 1px solid #eee;
            padding-top: 20px;
            margin-top: 10px;
            align-items: center;
            gap: 20px;
        }
        .qr-placeholder { width: 100px; height: 100px; background: #333; }
        
        .btn-exit { background: #74c69d; color: #1b4332; border: none; padding: 5px 25px; border-radius: 15px; cursor: pointer; font-weight: bold; }
    </style>
</head>
<body>
    <header class="main-header">
        <div class="nav-container">
            <span class="logo">Order Packaging</span>
            <button class="btn-exit" onclick="location.href='food-surplus.html'">exit</button>
        </div>
    </header>

    <main class="content-wrapper">
        <div class="packaging-card">
            <div class="item-header">Roasted Chicken Rice - $5.00</div>
            
            <div class="option-list">
                <label class="option-item">
                    <input type="radio" name="pack" value="0" checked onclick="updateTotal(0, false)">
                    Standard Plastic ( +$0.00 )
                </label>
                
                <label class="option-item">
                    <input type="radio" name="pack" value="5" onclick="updateTotal(0.20, false)">
                    Biodegradable Box ( +$0.20 ) - Earn 5 Green Pts
                </label>
                
                <label class="option-item">
                    <input type="radio" name="pack" value="20" id="byo-radio" onclick="updateTotal(-0.10, true)">
                    BYO Container ( -$0.10 ) - Earn 20 Green Pts
                </label>
            </div>

            <div style="margin-top:20px;">Remarks: <input type="text" class="remarks-box"></div>

            <div id="qr-section">
                <div class="qr-placeholder">
                    <img src="https://api.qrserver.com/v1/create-qr-code/?size=100x100&data=BYOConfirm" alt="QR Code">
                </div>
                <div>
                    <h4 style="margin:0;">Hawker Confirmation</h4>
                    <p style="color:#666; font-size: 0.9rem;">Show this to the hawker to confirm your BYO container.</p>
                </div>
            </div>

            <button class="btn-primary" style="width: 100%; margin-top: 20px; padding: 15px;" onclick="proceedToVerify()">
                Add To Cart - $<span id="final-price">5.00</span>
            </button>
        </div>
    </main>

    <script>
        const basePrice = 5.00;

        // Function now accepts the price difference (adjustment) and whether to show QR
        function updateTotal(adjustment, showQR) {
            // 1. Update Price
            const newTotal = (basePrice + adjustment).toFixed(2);
            document.getElementById('final-price').innerText = newTotal;

            // 2. Toggle QR Section
            document.getElementById('qr-section').style.display = showQR ? 'flex' : 'none';
        }

        function proceedToVerify() {
            const byoChecked = document.getElementById('byo-radio').checked;
            
            if (byoChecked) {
                // If BYO is selected, go to verification page
                location.href = 'verification.html';
            } else {
                // Otherwise, just simulate adding to cart
                alert("Order added to cart! Proceeding to payment...");
                location.href = 'food-surplus.html'; 
            }
        }
    </script>
</body>
</html>